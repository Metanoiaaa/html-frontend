<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
    <title>Recept toevoegen</title>
</head>
<body>
    <h1>Recept toevoegen</h1>

    <table class="table table-striped">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
            </tr>
        </thead>
        <tbody id="recepts-table">
        </tbody>  
    </table>

    <div class="mb-3">
        <label for="name-input" class="form-label">Naam recept</label>
        <input type="text" class="form-control" id="name-input" placeholder="Vul hier een receptnaam in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Kooktijd</label>
        <input type="number" class="form-control" id="cookingtime-input" placeholder="Vul hier de kooktijd in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Rating</label>
        <input type="number" class="form-control" id="rating-input" placeholder="Vul hier de rating in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Type maaltijd</label>
        <input type="number" class="form-control" id="mealtype-input" placeholder="Vul hier het type maaltijd in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Type BBQ</label>
        <input type="number" class="form-control" id="bbqid-input" placeholder="Vul hier het type barbecue in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Introductie</label>
        <input type="number" class="form-control" id="intro-input" placeholder="Vul hier de introductie in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Instructies</label>
        <input type="number" class="form-control" id="coockingdescription-input" placeholder="Vul hier de instructies in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Benodigdheden</label>
        <input type="number" class="form-control" id="utensilsid-input" placeholder="Vul hier de benodigdheden in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Geupload door</label>
        <input type="number" class="form-control" id="uploadername-input" placeholder="Vul hier de uploader in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Aangemaakt op</label>
        <input type="number" class="form-control" id="datecreate-input" placeholder="Vul hier de aanmaakdatum in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Gewijzigd op</label>
        <input type="number" class="form-control" id="dateedited-input" placeholder="Vul hier de wijzingsdatum in.">
      </div>
      <div class="mb-3">
        <label for="amount-input" class="form-label">Foto recept</label>
        <input type="number" class="form-control" id="receptphoto-input" placeholder="Voer hier de url naar de foto in.">
      </div>
<button type="button" class="btn btn-success" onclick="createRecept()">Opslaan</button>

<button onclick="loadRecepts()">Toon recepten</button>
<div id="divrecept"></div>
<button onclick="toon_allereceptenpython()">Toon recepten python</button>
<div id="divreceptpython"></div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoTz1HIcje39Wm4jDKdf19U8gI4ddQ3GYNS7NTKfAdVQSZe" crossorigin="anonymous"></script>       
    <script>
        function toon_allerecepten()
        {
          fetch("https://localhost:7042/api/Recepten")
          .then(pullrecepts => pullrecepts.json()) 
          .then(r => abc(r))
        }

        function ophalenReceptData(data)

        {         
          for (let i = 0; i < data.length; i++){
            document.getElementById("divrecept").innerHTML += data[i].Receptname;
            document.getElementById("divrecept").innerHTML += data[i].cookingtime +"<br>";
          }
        }

        
        function toon_allereceptenpython()
        {
          fetch("https://localhost:7042/api/Recepten")
          .then(pullrecepts => pullrecepts.json()) 
          .then(r => def(r))
        }

        function def(data)
        {
            document.getElementById("divreceptpython").innerHTML = data.recept_title[0];          
        }

       function createRecept() {
            // Invoer velden uitlezen
            let nameInvoer = document.getElementById('name-input').value;
            let cookingTimeInvoer = document.getElementById('cookingtime-input').checked;
            let cookingDescriptionInvoer = document.getElementById('coockingdescription-input').checked; 
            let mealTypeInvoer = document.getElementById('mealtype-input').checked; 
            let introInvoer = document.getElementById('intro-input').checked; 
            let receptPhotoInvoer = document.getElementById('receptphoto-input').checked; 
            let bbqIDInvoer = document.getElementById('bbqid-input').checked; 
            let utensilsIDInvoer = document.getElementById('utensilsid-input').checked;
            let ratingInvoer = document.getElementById('rating-input').checked; 
            let uploaderNameInvoer = document.getElementById('uploadername-input').checked; 
            let dateCreateInvoer = document.getElementById('datecreate-input').checked; 
            let dateEditedInvoer = document.getElementById('dateedited-input').checked;  


            // Maak een recept object in javascript
            let newRecept = {
                name: nameInvoer,
                cookingTime: cookingTimeInvoer,
                cookingDescription: cookingDescriptionInvoer,
                mealType: mealTypeInvoer,
                intro: introInvoer,
                receptPhoto: receptPhotoInvoer,
                bbqID: bbqIDInvoer,
                utensilsID: utensilsIDInvoer,
                uploaderName: uploaderNameInvoer,
                dateCreate: dateCreateInvoer,
                dateEdited: dateEditedInvoer
            }

            fetch("https://localhost:7042/api/Recepten", {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify(newRecept)
            })
            .then(response => {
                alert('Is goedgegaan');
                loadRecepts();
            })
            .catch(error => {
                alert('Er is iets fouts gegaan');
            });  
        }
       
       function loadRecepts() {
            fetch('https://localhost:7042/api/Recepten')
            .then(res => res.json()) // = anonymous function
            .then(data => {
                console.log(data);

                let tableHtml = '';

                data.forEach(recept => {
                    tableHtml += `
                        <tr>
                            <td>${recept.id}</td>
                            <td>${recept.name}</td>
                            <td>${recept.cookingTime}</td>
                            <td>${recept.cookingDescription}</td>
                            <td>${recept.mealType}</td>
                            <td>${recept.intro}</td>
                            <td>${recept.receptPhoto}</td>
                            <td>${recept.bbqID}</td>
                            <td>${recept.utensilsID}</td>
                            <td>${recept.uploaderName}</td>
                            <td>${recept.dateCreate}</td>
                            <td>${recept.dateEdited}</td>
                        </tr>
                    `
                });

                document.getElementById('recepts-table').innerHTML = tableHtml;
            })
        }

        loadRecepts();

</script>
</body>
</html>