<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recept Toevoegen</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">

  <link href="css/styles.css" rel="stylesheet">

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/js/bootstrap.bundle.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">
</head>

<body>
  <style>
    h1 {
      margin-top: 20px;
      text-align: center;
    }

    p {
      text-align: center;
    }

    .col {
      border: 0px solid #000;
    }

    .button-wrapper {
      display: flex;
      justify-content: center;
      gap: 15px;
      margin-bottom: 30px;
      margin-top: 30px;
    }

    .extra-stap-knop {
      display: block;
      margin: auto;
      height: 30px;
      line-height: 18px;
      margin-top: 10px;
      margin-bottom: 18px;
    }
  </style>
  <div class="container-fluid onze-header">


    <nav class="navbar navbar-expand">
      <div class="container-fluid">
        <a class="navbar-brand" href="index.html">
          <img src="img/logo.png" class="img-fluid logo" alt="Recepten Database" />
        </a>
      </div>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent"
        aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav me-auto mb-2 mb-lg-0">
          <li class="nav-item">
            <a class="nav-link" aria-current="page" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="Recepten.html">Recepten</a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              Recepten Bewerken
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="ReceptToevoegen.html">Toevoegen</a></li>
              <li><a class="dropdown-item" href="Recept-aanpassen.html">Aanpassen</a></li>

            </ul>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
              <i class="fa-solid fa-circle-user"></i>
            </a>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="Gebruikers.html">Mijn Account</a></li>
              <li><a class="dropdown-item" href="GebruikersAanmaken.html">Account aanmaken</a></li>

            </ul>
          </li>
        </ul>

      </div>

    </nav>

    <div class="header">
      <div class="search">
        <div class="input-group">
          <span class="input-group-text"><i class="fa-solid fa-magnifying-glass"></i></span>
          <input type="text" class="form-control" placeholder="Zoek recept..">
        </div>
      </div>
    </div>


    <h1>Recept toevoegen</h1>
    <p>Vul de volgende gegevens in om een recept aan te maken:</p>
    <div class="container text-center TabelGebruikersGegevens">
      <div class="row row-cols-2">
        <div class="col">
          <label for="recipeTitle-input" class="form-label">Naam recept</label>
          <input type="text" class="form-control" id="recipeTitle-input" placeholder="Vul hier een receptnaam in.">


          <label for="prepTime-input" class="form-label">Bereidingstijd</label>
          <input type="number" class="form-control" id="prepTime-input" placeholder="Vul hier de Bereidingstijd in.">

          <div style="display: none;">
            <label for="rating-input" class="form-label">Rating</label>
            <input type="number" class="form-control" id="rating-input" placeholder="Vul hier de rating in." value="0">
          </div>


          <label for="bbqId-input" class="form-label">Type BBQ</label>
          <input type="number" class="form-control" id="bbqId-input" placeholder="Vul hier het type barbecue in.">


          <label for="intro-input" class="form-label">Introductie</label>
          <input type="text" class="form-control" id="intro-input" placeholder="Vul hier de introductie in.">


          <label for="userId-input" class="form-label">Geupload door</label>
          <input type="text" class="form-control" id="userId-input" placeholder="Vul hier de UserID in.">

          <label for="dateCreate-input" class="form-label">Aangemaakt op</label>
          <input type="text" class="form-control" id="dateCreate-input" placeholder="Vul hier de aanmaakdatum in.">


          <label for="foto-input" class="form-label">Foto recept</label>
          <input type="text" class="form-control" id="foto-input" placeholder="Voer hier de url naar de foto in.">

          <label for="dieet-input" class="form-label">Type dieet</label>
          <input type="text" class="form-control" id="dieet-input" placeholder="Voer hier het type dieet in.">

        </div>
        <div class="col">
          <label for="prepText-input" class="form-label">Instructies</label>
          <div id="input-container">
            <input type="text" class="form-control" id="prepText-input" placeholder="Vul hier stap 1 van de instructies in..">
          </div>
          <button class="btn btn-success btn-sm extra-stap-knop" id="add-step-button" onclick="addStep()">+</button>
          <div id="input-container2">
            <label for="ingredienten-input" class="form-label">ingredienten</label>
            <input type="number" class="form-control" id="ingredienten-input"
              placeholder="Vul hier een ingredient in met de hoeveelheid..">
          </div>
          <button class="btn btn-success btn-sm extra-stap-knop" id="add-step-button" onclick="addIngredient()">+</button>

          <label for="cookAttireId-input" class="form-label">Benodigdheden</label>
          <div id="input-container3">
            <input type="number" class="form-control" id="cookAttireId-input" placeholder="Vul hier de benodigdheden in..">
          </div>
          <button class="btn btn-success btn-sm extra-stap-knop" id="add-step-button" onclick="addBenodigheden()">+</button>



        </div>

      </div>
    </div>
    <div class="button-wrapper">
      <button type="button" class="btn btn-success" onclick="createRecept()">Recept opslaan</button>
      <button type="button" class="btn btn-danger" onclick="location.href='index.html'">Annuleren</button>
    </div>

    <script>
      function addStep() {
        var inputContainer = document.getElementById("input-container");
        var newInput = document.createElement("input");
        newInput.type = "text";
        newInput.className = "form-control";
        newInput.placeholder = "Vul hier de volgende stap van de instructies in..";
        inputContainer.appendChild(newInput);
      }

      function addIngredient() {
        var inputContainer = document.getElementById("input-container2");
        var newInput = document.createElement("input");
        newInput.type = "text";
        newInput.className = "form-control";
        newInput.placeholder = "Vul hier een ingredient in met de hoeveelheid..";
        inputContainer.appendChild(newInput);
      }

      function addBenodigheden() {
        var inputContainer = document.getElementById("input-container3");
        var newInput = document.createElement("input");
        newInput.type = "text";
        newInput.className = "form-control";
        newInput.placeholder = "Vul hier de benodigdheden in..";
        inputContainer.appendChild(newInput);
      }




      function ophalenReceptData(data) {
        for (let i = 0; i < data.length; i++) {
          document.getElementById("divjepython").innerHTML += data[i].recipeID;
          document.getElementById("divjepython").innerHTML += data[i].prepTime + "<br>";
        }
      }


      function def(data) {

        document.getElementById("divjepython").innerHTML = data.recipe_title[0];

        //console.log(data);

      }

      function createRecept() {
        // Invoer velden uitlezen
        let nameInvoer = document.getElementById('recipeTitle-input').value;
        let prepTimeInvoer = document.getElementById('prepTime-input').value;
        let prepTextInvoer = document.getElementById('prepText-input').value;
        let introInvoer = document.getElementById('intro-input').value;
        let fotoInvoer = document.getElementById('foto-input').value;
        let bbqIdInvoer = document.getElementById('bbqId-input').value;
        let cookAttireIdInvoer = document.getElementById('cookAttireId-input').value;
        let ratingInvoer = document.getElementById('rating-input').value;
        let userIdInvoer = document.getElementById('userId-input').value;
        let dateCreateInvoer = document.getElementById('dateCreate-input').value;

        // Maak een recept object in javascript
        let newRecept = {
          recipeID: nameInvoer,
          prepTime: prepTimeInvoer,
          prepText: prepTextInvoer,
          intro: introInvoer,
          foto: fotoInvoer,
          bbqId: bbqIdInvoer,
          cookAttireId: cookAttireIdInvoer,
          userId: userIdInvoer,
          dateCreate: dateCreateInvoer,
          diet: dieet-invoer
        }

        console.log(JSON.stringify(newRecept));

        fetch("https://localhost:7042/api/Recepten", {
          method: 'POST',
          headers: {
            'Content-Type': 'application/json'
          },

          body: JSON.stringify(newRecept)
        })
          .then(response => {
            alert('Is goedgegaan');
            loadRecepts();
          })
          .catch(error => {
            alert('Er is iets fouts gegaan');
          });
      }

      function loadRecepts() {
        fetch("https://localhost:7042/api/Recepten")
          .then(res => res.json())
          .then(data => {
            console.log(data);

            let tableHtml = '';

            data.forEach(recept => {
              tableHtml += `
                        <tr>
                            <td>${recept.recipeID}</td>
                            <td>${recept.recipeTitle}</td>
                            <td>${recept.userId}</td>
                            <td>${recept.prepTime}</td>
                            <td>${recept.prepText}</td>
                            <td>${recept.cookAttireId}</td>
                            <td>${recept.bbqId}</td>
                            <td>${recept.rating}</td>
                            <td>${recept.foto}</td>
                            <td>${recept.intro}</td>
                            <td>${recept.dateCreate}</td>
                        </tr>
                    `
            });

            document.getElementById('recepts-table').innerHTML = tableHtml;
          })
      }

      loadRecepts();

    </script>
</body>

</html>